<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        body {
            background-color: rgb(50, 50, 50);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
       .live {
            background-color: green;
        }
        .not-available {
            background-color: red;
        }
        #lists {
            padding: 10px;
            text-align: center;
        }

        .content {
            display: flex;
            flex: 1;
            flex-direction: column;
            height: 100%;
        }

        .video, .chat {
            border: none;
        }

        .video {
            
            height: 30vh;
            width: 100%;
        }

        .chat {
            
            height: 70vh;
            width: 100%;
        }
        .hide {
                display: block;
                 margin: 0 auto;
            }

        @media (min-width: 768px) {
            .content {
                flex-direction: row;
            }

            .video {
                height: 100%;
                width: 70%;
            }

            .chat {
                height: 100%;
                width: 30%;
            }
            .hide {
            display: none;
        }
            #lists {
                width: 100%;
                padding: 10px;
                text-align: center;
                flex: 0 0 auto;
            }
        }
    </style>
</head>
<body>
    <script>
        function changeSrc(loc) {
            document.getElementById('MyFrame').src = loc;
        }

        function clickyClick() {
            const newid = document.getElementById('newid').value;
            const frame = document.getElementById('MyFrame');
            
            if (newid.includes('[k]')) {
                const channelName = newid.replace('[k]', '');
                frame.src = 'https://player.kick.com/' + channelName;
            } else if (newid.includes('[o]')) {
                const channelName = newid.replace('[o]', '');
                frame.src = 'https://ok.ru/videoembed/' + channelName + '?nochat=1&autoplay=1';
            } else {
                frame.src = 'https://player.twitch.tv/?channel=' + newid + '&parent=chicktv.github.io&parent=chicktv.github.io';
            }
        }
        
        function changechatSrc(loc2) {
            document.getElementById('chat_embed').src = loc2;
        }
document.addEventListener('DOMContentLoaded', () => {
            const channels = [
                { id: 'cobra2024', url: 'https://kick.com/api/v2/channels/cobra2024' },
                { id: 'nanase-maru525', url: 'https://kick.com/api/v2/channels/nanase-maru525' },
				{ id: 'qt369', url: 'https://kick.com/api/v2/channels/qt369' },
				{ id: 'jeukpo', url: 'https://kick.com/api/v2/channels/jeukpo' },
				{ id: 'collartv', url: 'https://kick.com/api/v2/channels/collartv' },
				{ id: 'WhiteWing000', url: 'https://kick.com/api/v2/channels/WhiteWing000' },
				{ id: 'Eastsnake25', url: 'https://kick.com/api/v2/channels/Eastsnake25' }
            ];

            async function fetchStatus(url, elementId) {
                const statusElement = document.getElementById(elementId);

                try {
                    const response = await fetch(url);
                    const data = await response.json();

                    if (data.livestream) {
                        if (data.livestream.is_live) {
                            statusElement.classList.add('live');
                            statusElement.classList.remove('not-live', 'not-available');
                        } else {
                            statusElement.classList.add('not-live');
                            statusElement.classList.remove('live', 'not-available');
                        }
                    } else {
                        statusElement.classList.add('not-available');
                        statusElement.classList.remove('live', 'not-live');
                    }
                } catch (error) {
                    console.error('Error fetching status:', error);
                    statusElement.classList.add('not-available');
                    statusElement.classList.remove('live', 'not-live');
                }
            }

            function fetchAllStatuses() {
                channels.forEach(channel => {
                    fetchStatus(channel.url, channel.id);
                });
            }

            fetchAllStatuses();
            setInterval(fetchAllStatuses, 180000); // 每30秒更新一次状态
        });
        
        
          function toggleButtons() {
            const listsDiv = document.getElementById('lists');
            const hideShowButton = document.getElementById('hide'); // Assuming "hide" button is the last one

            if (listsDiv.style.display === 'none') {
                // Show the lists div
                listsDiv.style.display = 'block';
                // Change the button text to "hide"
                hideShowButton.textContent = '▲';
            } else {
                // Hide the lists div
                listsDiv.style.display = 'none';
                // Change the button text to "show"
                hideShowButton.textContent = '▼';
            }
        }
    </script>

    <div id="lists" class="lists">
    <button id="WhiteWing000" class="status-button" onclick="changeSrc('https://player.kick.com/WhiteWing000')">Ⓚ翼</button>
    <button onclick="changeSrc('https://ok.ru/videoembed/7791416843891?nochat=1&autoplay=1')">ⓞ翼</button>
    
    <button id="Eastsnake25" class="status-button" onclick="changeSrc('https://player.kick.com/Eastsnake25')">ⓀN</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=northsnake25&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')">ⓉN</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=Ayatv1&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')">ⓉAya</button>
    <button id="collartv" class="status-button" onclick="changeSrc('https://player.kick.com/collartv')">ⓀA</button>
    <button id="nanase-maru525" class="status-button" onclick="changeSrc('https://player.kick.com/nanase-maru525')">Ⓚ西</button>
    <button id="jeukpo" class="status-button" onclick="changeSrc('https://player.kick.com/jeukpo')">Ⓚ爵</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=aquariusottercereal&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')" style="display:none">ⓉA</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=mingpig930_2&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')" style="display:none">Ⓣ朗</button>
    <button id="qt369" class="status-button" onclick="changeSrc('https://player.kick.com/qt369')">ⓀQT</button>
    <button onclick="changeSrc('https://ok.ru/videoembed/3849262800563?nochat=1&autoplay=1')">QT</button>
    <button id="cobra2024" class="status-button" onclick="changeSrc('https://player.kick.com/cobra2024')">哥</button>

        <input type="text" name="newid" id="newid" placeholder="twitch channel id"/>
        <button onclick="clickyClick()">submit</button>
        <button onclick="changechatSrc('//sk-knower.com/chat/whitewing940920?pop=true')">SKchat</button> 
        <button onclick="changechatSrc('https://www.twitch.tv/embed/Whitewing940920/chat?darkpopout&parent=chicktv.github.io&parent=chicktv.github.io')">Tchat</button> 

    </div>
 <button id="hide" class="hide" onclick="toggleButtons()">▲</button>   
    <div class="content">
        <iframe id="MyFrame" class="video" src="https://player.kick.com/WhiteWing000" frameborder="0" allowfullscreen="true" scrolling="no"></iframe>

        <iframe
            class="chat"
            id="chat_embed"
            src="https://www.twitch.tv/embed/Whitewing940920/chat?darkpopout&parent=chicktv.github.io&parent=chicktv.github.io">
        </iframe>
    </div>
</body>
</html>
