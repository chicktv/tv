<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        body {
            background-color: rgb(50, 50, 50);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
       .live {
           color: #32CD32;
            box-shadow: 0 0 10px #32CD32,
                0 0 10px #32CD32,
                0 0 40px #32CD32,
                0 0 10px #52D017 inset;
                transform: scale(1.05);
        }
        .not-available {
            background-color: red;
        }
        #lists {
            padding: 10px;
            text-align: center;
        }

        .content {
            display: flex;
            flex: 1;
            flex-direction: column;
            height: 100%;
        }

        .video, .chat {
            border: none;
        }

        .video {
            
            height: 30vh;
            width: 100%;
        }

        .chat {
            
            height: 70vh;
            width: 100%;
        }
        .hide {
                display: block;
                 margin: 0 auto;
            }

        @media (min-width: 768px) {
            .content {
                flex-direction: row;
            }

            .video {
                height: 100%;
                width: 70%;
            }

            .chat {
                height: 100%;
                width: 30%;
            }
            .hide {
            display: none;
        }
            #lists {
                width: 100%;
                padding: 10px;
                text-align: center;
                flex: 0 0 auto;
            }
        }
    </style>
</head>
<body>
    <script>
        function changeSrc(loc) {
            document.getElementById('MyFrame').src = loc;
        }

        function clickyClick() {
            const newid = document.getElementById('newid').value;
            const frame = document.getElementById('MyFrame');
            
            if (newid.includes('[k]')) {
                const channelName = newid.replace('[k]', '');
                frame.src = 'https://player.kick.com/' + channelName;
            } else if (newid.includes('[o]')) {
                const channelName = newid.replace('[o]', '');
                frame.src = 'https://ok.ru/videoembed/' + channelName + '?nochat=1&autoplay=1';
            } else {
                frame.src = 'https://player.twitch.tv/?channel=' + newid + '&parent=chicktv.github.io&parent=chicktv.github.io';
            }
        }
        
        function changechatSrc(loc2) {
            document.getElementById('chat_embed').src = loc2;
        }
document.addEventListener('DOMContentLoaded', () => {
            const channels = [
            { id: 'cobra2024', url: 'https://kick.com/api/v2/channels/cobra2024', type: 'kick' },
            { id: 'nanase-maru525', url: 'https://kick.com/api/v2/channels/nanase-maru525', type: 'kick' },
            { id: 'qt369', url: 'https://kick.com/api/v2/channels/qt369', type: 'kick' },
            { id: 'jeukpo', url: 'https://kick.com/api/v2/channels/jeukpo', type: 'kick' },
            { id: 'collartv', url: 'https://kick.com/api/v2/channels/collartv', type: 'kick' },
            { id: 'WhiteWing000', url: 'https://kick.com/api/v2/channels/WhiteWing000', type: 'kick' },
            { id: 'Eastsnake25', url: 'https://kick.com/api/v2/channels/Eastsnake25', type: 'kick' },
            { id: 'alancml', url: 'https://twitch-proxy.freecodecamp.rocks/helix/streams?user_login=alancml', type: 'twitch' }
        ];

          async function fetchStatus(url, elementId, type) {
            const statusElement = document.getElementById(elementId);

            try {
                const response = await fetch(url);
                const data = await response.json();

                let isLive = false;

                if (type === 'kick') {
                    isLive = data.livestream && typeof data.livestream.is_live === 'boolean' && data.livestream.is_live;
                } else if (type === 'twitch') {
                    isLive = data.data && data.data.length > 0 ? data.data[0].type === 'live' : false;
                }

                if (isLive) {
                    statusElement.classList.add('live');
                    statusElement.classList.remove('not-live', 'not-available');
                    statusElement.textContent = '正在直播';
                } else {
                    statusElement.classList.add('not-live');
                    statusElement.classList.remove('live', 'not-available');
                    statusElement.textContent = '不在线';
                }
            } catch (error) {
                console.error('Error fetching status:', error);
                statusElement.classList.add('not-available');
                statusElement.classList.remove('live', 'not-live');
                statusElement.textContent = '无法获取状态';
            }
        }

        function fetchAllStatuses() {
            channels.forEach(channel => {
                fetchStatus(channel.url, channel.id, channel.type);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchAllStatuses();  // 初始加载
            setInterval(fetchAllStatuses, 8 * 60 * 1000); // 每 8 分钟自动更新
        });
        
        
          function toggleButtons() {
            const listsDiv = document.getElementById('lists');
            const hideShowButton = document.getElementById('hide'); // Assuming "hide" button is the last one

            if (listsDiv.style.display === 'none') {
                // Show the lists div
                listsDiv.style.display = 'block';
                // Change the button text to "hide"
                hideShowButton.textContent = '▲';
            } else {
                // Hide the lists div
                listsDiv.style.display = 'none';
                // Change the button text to "show"
                hideShowButton.textContent = '▼';
            }
        }
    </script>

    <div id="lists" class="lists">
    <button id="WhiteWing000" class="status-button" onclick="changeSrc('https://player.kick.com/WhiteWing000')">Ⓚ翼</button>
    <button onclick="changeSrc('https://ok.ru/videoembed/7791416843891?nochat=1&autoplay=1')">ⓞ翼</button>
    
    <button id="Eastsnake25" class="status-button" onclick="changeSrc('https://player.kick.com/Eastsnake25')">ⓀN</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=northsnake25&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')">ⓉN</button>
    <button id="alancml" class="status-button" onclick="changeSrc('https://player.twitch.tv/?channel=alancml&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')">ⓉA</button>
    <button id="collartv" class="status-button" onclick="changeSrc('https://player.kick.com/collartv')">ⓀA</button>
    <button id="nanase-maru525" class="status-button" onclick="changeSrc('https://player.kick.com/nanase-maru525')">Ⓚ西</button>
    <button id="jeukpo" class="status-button" onclick="changeSrc('https://player.kick.com/jeukpo')">Ⓚ爵</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=aquariusottercereal&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')" style="display:none">ⓉA</button>
    <button onclick="changeSrc('https://player.twitch.tv/?channel=mingpig930_2&parent=chicktv01.wixsite.com&parent=chicktv.github.io&parent=chicktv.github.io')" style="display:none">Ⓣ朗</button>
    <button id="qt369" class="status-button" onclick="changeSrc('https://player.kick.com/qt369')">ⓀQT</button>
    <button onclick="changeSrc('https://ok.ru/videoembed/3849262800563?nochat=1&autoplay=1')">QT</button>
    <button id="cobra2024" class="status-button" onclick="changeSrc('https://player.kick.com/cobra2024')">哥</button>

        <input type="text" name="newid" id="newid" placeholder="twitch channel id"/>
        <button onclick="clickyClick()">submit</button>
        <button onclick="changechatSrc('//sk-knower.com/chat/whitewing940920?pop=true')">SKchat</button> 
        <button onclick="changechatSrc('https://www.twitch.tv/embed/Whitewing940920/chat?darkpopout&parent=chicktv.github.io&parent=chicktv.github.io')">Tchat</button> 

    </div>
 <button id="hide" class="hide" onclick="toggleButtons()">▲</button>   
    <div class="content">
        <iframe id="MyFrame" class="video" src="https://player.kick.com/WhiteWing000" frameborder="0" allowfullscreen="true" scrolling="no"></iframe>

        <iframe
            class="chat"
            id="chat_embed"
            src="https://www.twitch.tv/embed/Whitewing940920/chat?darkpopout&parent=chicktv.github.io&parent=chicktv.github.io">
        </iframe>
    </div>
</body>
</html>
